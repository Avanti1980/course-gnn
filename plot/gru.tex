\documentclass[openany]{ctexart}
\usepackage{amsmath,amssymb,amsthm,bm}
\usepackage{xcolor}
\definecolor{Solarized-base03}{RGB}{0, 43, 54}
\definecolor{Solarized-base02}{RGB}{7, 54, 66}
\definecolor{Solarized-base01}{RGB}{88, 110, 117}
\definecolor{Solarized-base00}{RGB}{101, 123, 131}
\definecolor{Solarized-base0}{RGB}{131, 148, 150}
\definecolor{Solarized-base1}{RGB}{147, 161, 161}
\definecolor{Solarized-base2}{RGB}{238, 232, 213}
\definecolor{Solarized-base3}{RGB}{253, 246, 227}
\definecolor{Solarized-yellow}{RGB}{181, 137, 0}
\definecolor{Solarized-orange}{RGB}{203, 75, 22}
\definecolor{Solarized-red}{RGB}{220, 50, 47}
\definecolor{Solarized-magenta}{RGB}{211, 54, 130}
\definecolor{Solarized-violet}{RGB}{108, 113, 196}
\definecolor{Solarized-blue}{RGB}{38, 139, 210}
\definecolor{Solarized-cyan}{RGB}{42, 161, 152}
\definecolor{Solarized-green}{RGB}{133, 153, 0}
\color{Solarized-base01}
\pagecolor{Solarized-base3}

\newcommand{\yellow}[1]{\textcolor{Solarized-yellow}{#1}}
\newcommand{\red}[1]{\textcolor{Solarized-red}{#1}}
\newcommand{\violet}[1]{\textcolor{Solarized-violet}{#1}}

\usepackage{fullpage}

\usepackage{algorithm,algorithmic}
\usepackage[bookmarksnumbered,bookmarksopen,colorlinks=true,citecolor=Solarized-green,anchorcolor=Solarized-blue,linkcolor=Solarized-blue,CJKbookmarks=true]{hyperref}

\usepackage{graphicx,epsfig,subfigure}
\usepackage{tikz,pgfplots}
\usepackage{ifthen}
\tikzset{>=stealth}
\usetikzlibrary{backgrounds,automata,shapes,snakes}
\usepackage[all]{xy}

\def \firstcircle{(90:1) circle (1.5)}
\def \secondcircle{(210:1) circle (1.5)}
\def \thirdcircle{(330:1) circle (1.5)}

\usepackage[inline]{enumitem}
\setenumerate[1]{itemsep=0pt,partopsep=0pt,parsep=0pt,topsep=0pt}
\setitemize[1]{itemsep=0pt,partopsep=0pt,parsep=0pt,topsep=0pt}
\setdescription{itemsep=0pt,partopsep=0pt,parsep=0pt,topsep=0pt}

\usepackage{titlesec}
\titleformat{\section}
{\color{Solarized-yellow}\normalfont\Large\bfseries}
{\color{Solarized-yellow}\thesection}{1em}{}
\titleformat{\subsection}
{\color{Solarized-violet}\normalfont\large\bfseries}
{\color{Solarized-violet}\thesubsection}{1em}{}

\usepackage{kbordermatrix}

%\usepackage[charter]{newtxmath} % http://texdoc.net/texmf-dist/doc/fonts/newtx/newtxdoc.pdf
\setmainfont[]{EBGaramond08-Regular}
\setCJKmainfont[BoldFont=FZHei-B01]{FZLongZhao-R-GB}
\xeCJKsetup{CJKmath=true}
\everymath{\color{Solarized-magenta}}

%\usepackage[framemethod=tikz]{mdframed}
%\mdfdefinestyle{theoremstyle}{
%    linecolor=Solarized-red,
%    linewidth=0.5pt,
%    frametitlerule=true,
%    frametitlebackgroundcolor=Solarized-base3,
%    backgroundcolor=Solarized-base3,
%    innertopmargin=\topskip,
%}
%\mdtheorem[style=theoremstyle]{definition}{\bf{定义}}
%\mdtheorem[style=theoremstyle]{theorem}{\bf{定理}}

\theoremstyle{definition}
\newtheorem{definition}{\bf{定义}}
\newtheorem{theorem}{\bf{定理}}
\newtheorem{lem}[theorem]{\bf{引理}}
\newtheorem{cor}[theorem]{\bf{推论}}
\newtheorem{example}[theorem]{\bf{例}}
\newtheorem*{rmk}{\bf{注}}
\renewcommand{\proofname}{\bf{证明}}

\newtheoremstyle{Solarized-exercise}{}{}{\color{Solarized-base01}}{}{\color{Solarized-red}\bfseries}{}{}{}
\theoremstyle{Solarized-exercise}
\newtheorem{exercise}{Q.}[section]
\newtheorem{proposition}{Prop}

\newtheoremstyle{Solarized-solution}{}{}{\color{Solarized-base01}}{}{\color{Solarized-green}\bfseries}{}{ }{}
\theoremstyle{Solarized-solution}
\newtheorem*{solution}{A.}

\def \zerov {\bm{0}}
\def \onev {\bm{1}}
\def \av {\bm{a}}
\def \bv {\bm{b}}
\def \cv {\bm{c}}
\def \dv {\bm{d}}
\def \ev {\bm{e}}
\def \fv {\bm{f}}
\def \gv {\bm{g}}
\def \hv {\bm{h}}
\def \iv {\bm{i}}
\def \ov {\bm{o}}
\def \pv {\bm{p}}
\def \rv {\bm{r}}
\def \tv {\bm{t}}
\def \uv {\bm{u}}
\def \vv {\bm{v}}
\def \wv {\bm{w}}
\def \xv {\bm{x}}
\def \yv {\bm{y}}
\def \zv {\bm{z}}

\def \Av {\mathbf{A}}
\def \Bv {\mathbf{B}}
\def \Cv {\mathbf{C}}
\def \Dv {\mathbf{D}}
\def \Fv {\mathbf{F}}
\def \Gv {\mathbf{G}}
\def \Hv {\mathbf{H}}
\def \Iv {\mathbf{I}}
\def \Kv {\mathbf{K}}
\def \Lv {\mathbf{L}}
\def \Mv {\mathbf{M}}
\def \Pv {\mathbf{P}}
\def \Qv {\mathbf{Q}}
\def \Sv {\mathbf{S}}
\def \Uv {\mathbf{U}}
\def \Vv {\mathbf{V}}
\def \Wv {\mathbf{W}}
\def \Xv {\mathbf{X}}
\def \Yv {\mathbf{Y}}
\def \Zv {\mathbf{Z}}

\def \alphav {\bm{\alpha}}
\def \betav {\bm{\beta}}
\def \gammav {\bm{\gamma}}
\def \lambdav {\bm{\lambda}}
\def \Lambdav {\bm{\Lambda}}
\def \thetav {\bm{\theta}}
\def \epsilonv {\bm{\epsilon}}
\def \xiv {\bm{\xi}}
\def \muv {\bm{\mu}}
\def \Sigmav {\bm{\Sigma}}
\def \Phiv {\bm{\Phi}}
\def \nuv {\bm{\nu}}

\def \Acal {\mathcal{A}}
\def \Bcal {\mathcal{B}}
\def \Ical {\mathcal{I}}
\def \Lcal {\mathcal{L}}
\def \Ncal {\mathcal{N}}
\def \Pcal {\mathcal{P}}

\def \Dbb {\mathbb{D}}
\def \Ebb {\mathbb{E}}
\def \Nbb {\mathbb{N}}
\def \Qbb {\mathbb{Q}}
\def \Rbb {\mathbb{R}}
\def \Sbb {\mathbb{S}}

\def \Ifrak {\mathfrak{I}}
\def \Lfrak {\mathfrak{L}}
\def \Pfrak {\mathfrak{P}}

\def \diag {\mathrm{diag}}
\def \sign {\mathrm{sign}}
\def \sp {\mathrm{span}}
\def \diff {\mathrm{d}}
\def \tr {\mathrm{tr}}
\def \KL {\mathrm{KL}}
\def \var {\mathrm{var}}
\def \cov {\mathrm{cov}}
\def \ow {\mathrm{o.w.}}
\def \tanh {\mathrm{Tanh}}

\def \st {\mbox{s.t.}}
\def \const {\mbox{const}}

\DeclareMathOperator*{\argmin}{argmin}
\DeclareMathOperator*{\argmax}{argmax}

\allowdisplaybreaks[4]

\begin{document}
\title{}
\author{}
\date{}
\maketitle

\begin{tikzpicture} [thick, scale=0.8]

    \tikzstyle{every node}=[rectangle,draw=Solarized-base01,minimum height=25,minimum width=50,font=\Large]

    \node (r) at (5,0) {$\rv_t$};
    \node (z) at (10,0) {$\zv_t$};
    \node (a') at (15,0) {$\widetilde{\av}_t$};

    \node[circle,minimum width=32,fill=Solarized-base1] (concatenate1) at (2,-3.5) {$+$};

    \node[circle,minimum width=32,fill=Solarized-base2] (s1) at (5,-2) {$\sigma$};
    \node[circle,minimum width=32,fill=Solarized-base2] (s2) at (10,-2) {$\sigma$};
    \node[circle,minimum width=32,fill=Solarized-base2] (t1) at (15,-2) {\normalsize $\tanh$};

    \node[circle,minimum width=32,fill=Solarized-base2] (m1) at (5,2) {$\times$};
    \node[circle,minimum width=32,fill=Solarized-base2] (m2) at (15,2) {$\times$};
    \node[circle,minimum width=32,fill=Solarized-base2] (m3) at (10,4) {$\times$};
    \node[circle,minimum width=32,fill=Solarized-base2] (add) at (15,4) {$+$};

    \draw[->] (s1) -- (r);
    \draw[->] (r) -- (m1);
    \draw[->] (concatenate1) ++(3,0) -- (s1);
    \draw[->] (concatenate1) -- ++(8,0) -- (s2);
    \draw[->] (s2) -- (z);
    \draw[->] (z) -- (m3);
    \draw[->] (t1) -- (a');
    \draw[->] (a') -- (m2);
    \draw[->] (m2) -- (add);

    \node[circle,minimum width=32,fill=Solarized-base2] (mo) at (12.2,2) {$\onev -$};

    \draw[->] (z) ++(0,2) -- (mo);
    \draw[->] (mo) -- (m2);

    \node[circle,minimum width=32,fill=Solarized-base1] (concatenate2) at (7.5,-5) {$+$};
    \draw[->] (concatenate2) -- ++(7.5,0) -- (t1);

    \node (x) at (2,-7.5) {$\xv_t$};
    \draw[->] (x) -- (concatenate1);
    \draw[->] (x) ++ (0,2.5) -- (concatenate2);
    \draw[->,dashed] (m1) -- ++(2.5,0) -- (concatenate2);

    \node (am1) at (-1,4) {$\av_{t-1}$};
    \draw[->] (am1) -- (m3);
    \draw[->] (m3) -- (add);
    \draw[->] (am1) ++(0,-2) -- (m1);
    \draw[->] (am1) -- ++(0,-7.5) -- (concatenate1);
    \draw[->] (-3,4) -- (am1);

    \node (a) at (18,4) {$\av_t$};
    \draw[->] (a) -- ++(2,0);
    \draw[->] (add) -- (a);

    \draw[dashed,very thick,Solarized-blue] (0.8,-6) -- (19.5,-6) -- (19.5,5) -- (0.8,5) -- (0.8,-6);

    \node[circle,minimum width=32,fill=Solarized-base2,label={[inner sep=6pt]right:\large 向量元素乘}] at (5,-7.5) {$\times$};

    \node[circle,minimum width=32,fill=Solarized-base2,label={[inner sep=6pt]right:\large 向量和}] at (10,-7.5) {$+$};

    \node[circle,minimum width=32,fill=Solarized-base1,label={[inner sep=6pt]right:\large 向量拼接}] at (14,-7.5) {$+$};

\end{tikzpicture}




\end{document}

